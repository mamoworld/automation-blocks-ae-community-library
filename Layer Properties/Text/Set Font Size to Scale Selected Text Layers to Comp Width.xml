<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="a.GbY3:o=An#ST#riSJ,">TextName</variable><variable id="mN%pcl?GcjFpS{ll2^(F">text layer</variable><variable id="Q4]G$wRmT+{C#JBSbDda">text attributes</variable><variable id="eWKEw:v1c7uKqz[BE4-:">new font size</variable><variable id=".=|ZzVYwkDtXyH#3J[G5">scale factor</variable><variable id="g45yo9Z=zigQ]QX%=w.s">src text prop</variable><variable id="h:k#l*Sb)q!TS85XAHT:">match</variable><variable id="U):@`-vMWC8i1y{AbGIX">font list</variable><variable id="#mY}E9O}QwopKcxrFu[c">has keyframes</variable><variable id="%Y*C:L*KT5VRGIyk`ST5">old width</variable><variable id=";*q6$:ivNvCFZ%IfvTd^">keyData</variable><variable id="K#9/%T`Uxnqx/9^b;a0:">old font size</variable><variable id="aoU6Vt_{nd:n1;H09(*z">new width</variable></variables><block type="mm_multiline_comment_block" id="I0QhOBV7Rw/OdJFn6BI$" x="-2" y="-352"><field name="TEXT">Changes the font size of all selected&amp;#10;text layers such that their width is X%&amp;#10;of the comp width.</field></block><block type="es_tutorial" id="-4t(pA-~[}*Y$4@VIv9x" x="-6" y="-182"><field name="WATCH_TUT_LABEL">open web page</field><field name="TITLE">see this forum discussion</field><field name="URL">https://community.adobe.com/t5/after-effects-discussions/create-a-text-font-size-based-on-comp-size-with-automation-blocks/td-p/13147958</field></block><block type="variables_set" id="F%RdD1[_f~hQOp_qk%/@" x="0" y="0"><field name="VAR" id="a.GbY3:o=An#ST#riSJ,">TextName</field><value name="VALUE"><block type="text" id="=-p@]o1OW)*98Z`5/Z:K"><field name="TEXT">Sample Text</field></block></value><next><block type="variables_set" id="|V~y*:4BHP}q1oOKrv2M"><field name="VAR" id=".=|ZzVYwkDtXyH#3J[G5">scale factor</field><value name="VALUE"><block type="math_number" id="hu]=~1@X#SY@G/*;yRUW"><field name="NUM">90</field></block></value><next><block type="modal_input_dialog" id="G@hp=_Hyd3{Oz9-~bg)r"><mutation items="2"></mutation><field name="OK_CANCEL">OK_CANCEL</field><field name="FIELD_LABEL_0">change font size of selected layers to take X% </field><field name="FIELD_TYPE_0">TEXT_SINGLELINE</field><field name="FIELD_VAR_0" id=".=|ZzVYwkDtXyH#3J[G5">scale factor</field><field name="FIELD_LABEL_1">of comp width</field><field name="FIELD_TYPE_1">LABEL</field><next><block type="variables_set" id="cn{cWzP!ra[h@K8lkN=Z"><field name="VAR" id=".=|ZzVYwkDtXyH#3J[G5">scale factor</field><value name="VALUE"><block type="math_arithmetic" id="wCaD2u^xV#O?}zY08V#F"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="OjvGhW9FR%.FR-%C@G)_"><field name="NUM">1</field></shadow><block type="variables_get" id="+6MPW~9FE1{~z#-|x^J:"><field name="VAR" id=".=|ZzVYwkDtXyH#3J[G5">scale factor</field></block></value><value name="B"><shadow type="math_number" id="cY^2_T*OUxJ-xvrNpc1e"><field name="NUM">100</field></shadow></value></block></value><next><block type="ae_layer_for_all" id="gAWoy/RW$^,K*pmLSA9s"><field name="SELECTION">SELECTED</field><field name="TYPE">TextLayer</field><field name="LAYER_VAR" id="mN%pcl?GcjFpS{ll2^(F">text layer</field><field name="COMP_CHOICE">COMP</field><value name="COMP"><shadow type="ae_active_comp" id="P:9`mGOjA_U:4-xWv?5p"></shadow></value><statement name="LOOP_STATEMENT"><block type="variables_set" id="c/GOxsd^U4H9|qQcv0+y"><field name="VAR" id="%Y*C:L*KT5VRGIyk`ST5">old width</field><value name="VALUE"><block type="lists_getIndex" id="3zu+JYhZKLw^6:qt,?+("><mutation statement="false" at="true"></mutation><field name="MODE">GET</field><field name="WHERE">FROM_START</field><value name="VALUE"><block type="ae_layer_source_rect" id="8I;5fnDvw?Fi{vIaP*lO"><field name="SPACE">COMP_SPACE</field><field name="MASKS">USE_MASKS</field><value name="LAYER"><shadow type="ae_layer_list" id="Gf5O)dVYKZ=N-peWOQDa"><field name="SELECTION">SELECTED</field><field name="TYPE">Layer</field><value name="COMP"><shadow type="ae_active_comp" id="tA_M_M)TzF|dBj_=Fx]{"></shadow></value></shadow><block type="variables_get" id="xJUM4(uzp)[hUJ~zp[31"><field name="VAR" id="mN%pcl?GcjFpS{ll2^(F">text layer</field></block></value></block></value><value name="AT"><block type="math_number" id="xX:Dy!XR%DuB+o7rVM+S"><field name="NUM">3</field></block></value></block></value><next><block type="variables_set" id="rp|~fW;NnELk2-(A%4yZ"><field name="VAR" id="Q4]G$wRmT+{C#JBSbDda">text attributes</field><value name="VALUE"><block type="procedures_callreturn" id="OB=}f`fenoIN0HLUA?tQ"><mutation name="get text attributes from text layer"><arg name="text layer"></arg></mutation><value name="ARG0"><block type="variables_get" id="@.0Y/D^w;]/.{xR+-`PX"><field name="VAR" id="mN%pcl?GcjFpS{ll2^(F">text layer</field></block></value></block></value><next><block type="variables_set" id="pm~NARe_4sY2.4m,=+3c"><field name="VAR" id="K#9/%T`Uxnqx/9^b;a0:">old font size</field><value name="VALUE"><block type="procedures_callreturn" id="9]H|!9V^zZ2N)r-6B+go"><mutation name="get font size from text attributes"><arg name="text attributes"></arg></mutation><value name="ARG0"><block type="variables_get" id="]^HPO`^DL#Mnm8FOQEVB"><field name="VAR" id="Q4]G$wRmT+{C#JBSbDda">text attributes</field></block></value></block></value><next><block type="variables_set" id="Y*Zre8bhTcH@Sj)XEwY}"><field name="VAR" id="aoU6Vt_{nd:n1;H09(*z">new width</field><value name="VALUE"><block type="math_arithmetic" id=":nu2%olnBHu{D|:W^[t-"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="7QvIq!P8sZC#-(]Qve^x"><field name="NUM">1</field></shadow><block type="variables_get" id="6N4QyRa8k[Q#j{Dlywm5"><field name="VAR" id=".=|ZzVYwkDtXyH#3J[G5">scale factor</field></block></value><value name="B"><shadow type="math_number" id="2,aijpWfjk;p6,Be8j;,"><field name="NUM">1</field></shadow><block type="ae_comp_get_attribute" id="sCSTvDFfHJaI8ioy3C!K"><field name="PARAM">WIDTH</field><value name="ITEM"><shadow type="ae_active_comp" id="/T7x+R#gSI}H/%Jyfb*4"></shadow></value></block></value></block></value><next><block type="variables_set" id="v_$cRlBh/5nvA57l{_p}"><field name="VAR" id="eWKEw:v1c7uKqz[BE4-:">new font size</field><value name="VALUE"><block type="math_round" id="0#9!wc#{7Ta,mg%:H5E@"><field name="OP">ROUNDDOWN</field><value name="NUM"><shadow type="math_number" id=";x{CMIUz|;D;Xdmy?mw6"><field name="NUM">3.1</field></shadow><block type="math_arithmetic" id="Pk#LZh/`=W,y2m_Lg#*2"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="oa0$lwFf7Z%rEalOs):r"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="S?x5vh{Hk5i*GU5,~TPH"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="e5g$~1dGmS=.DWza$LCc"><field name="NUM">1</field></shadow><block type="variables_get" id="Ge!kY@CwL@!J1kDPrCh{"><field name="VAR" id="aoU6Vt_{nd:n1;H09(*z">new width</field></block></value><value name="B"><shadow type="math_number" id="G}#p,-^!!^l%|IeoUUdj"><field name="NUM">1</field></shadow><block type="variables_get" id="t0ECc:Ez,Q6lW(~PxO~]"><field name="VAR" id="%Y*C:L*KT5VRGIyk`ST5">old width</field></block></value></block></value><value name="B"><shadow type="math_number" id=",zI6}@qVOU)(Z_:H0PQI"><field name="NUM">1</field></shadow><block type="variables_get" id="w`|oB+(hdyI5zOLAz7to"><field name="VAR" id="K#9/%T`Uxnqx/9^b;a0:">old font size</field></block></value></block></value></block></value><next><block type="ae_property_set_attribute" id="U9hj#IN=C~A9ayH]ir]H"><field name="PARAM">VALUE</field><value name="ITEM"><block type="ae_property_path" id="Za;wA[]V8?tA:kJ/fQpa"><mutation fullPath="Comp 1::$1/ADBE Text Properties/ADBE Text Document" base="BASE_LAYER"></mutation><field name="PROPERTY_PATH">ADBE Text Properties/ADBE Text Document</field><field name="BASE_DROPDOWN">BASE_LAYER</field><value name="INP_LAYER"><shadow type="text" id="hUyZ%?^MonXy,-!VB1qp"><field name="TEXT">Comp 1::$1</field></shadow><block type="variables_get" id="-]o1g2hZ/?@i;a4=nAN."><field name="VAR" id="mN%pcl?GcjFpS{ll2^(F">text layer</field></block></value></block></value><value name="VALUE"><shadow type="ae_property_value_json" id=",oi|29JA=seQL/Bv7aV%"><field name="PROPERTY_VALUE_JSON">click refresh icon to load selected property value</field></shadow><block type="procedures_callreturn" id="?}|0Ay5l[jXXf-T^n:*n"><mutation name="set font size in text attributes"><arg name="text attributes"></arg><arg name="new font size"></arg></mutation><value name="ARG0"><block type="variables_get" id="cky@(};n{4)lK`m|N@Lb"><field name="VAR" id="Q4]G$wRmT+{C#JBSbDda">text attributes</field></block></value><value name="ARG1"><block type="variables_get" id="qzekPAA?83T4Ixi-J+-D"><field name="VAR" id="eWKEw:v1c7uKqz[BE4-:">new font size</field></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block><block type="procedures_defreturn" id="eS;Y:Rl:2Rp?L$7i^(^x" x="0" y="1008"><mutation><arg name="text layer" varid="mN%pcl?GcjFpS{ll2^(F"></arg></mutation><field name="NAME">get text attributes from text layer</field><comment pinned="false" h="80" w="160">reads all text attributes (font, font size, fill, stroke,...) from the source text of the given text layer</comment><statement name="STACK"><block type="variables_set" id="42?v(@UHhVu|Te_xQE{2"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field><value name="VALUE"><block type="ae_property_path" id="^w0m!pej`+%gkZ1QwBM2"><mutation fullPath="Comp 1::Foo/ADBE Text Properties/ADBE Text Document" base="BASE_LAYER"></mutation><field name="PROPERTY_PATH">ADBE Text Properties/ADBE Text Document</field><field name="BASE_DROPDOWN">BASE_LAYER</field><value name="INP_LAYER"><shadow type="text"><field name="TEXT">Comp 1::Foo</field></shadow><block type="variables_get" id="qJg0YnX4kzQJ`C#]qf6D"><field name="VAR" id="mN%pcl?GcjFpS{ll2^(F">text layer</field></block></value></block></value><next><block type="procedures_ifreturn" id="Q(|k/e.f9wzXo53nBa^%"><mutation value="1"></mutation><value name="CONDITION"><block type="logic_negate" id="OrrWFI=NJK[W74v`H5Il"><value name="BOOL"><block type="ae_property_exists" id="iQa_?NTF?1%L?zq:j:Y7"><value name="PROPERTY"><block type="variables_get" id="aAsa0hn~=`X:^tj(h!PM"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value></block></value></block></value><value name="VALUE"><block type="variables_get" id="RTngj3,{vF4q^_{k-7{I"><field name="VAR" id="U):@`-vMWC8i1y{AbGIX">font list</field></block></value><next><block type="variables_set" id="(O3qr,Vaa`ql#OIhD1I1"><field name="VAR" id="#mY}E9O}QwopKcxrFu[c">has keyframes</field><value name="VALUE"><block type="logic_compare" id="=,|slf0+Ocj]ddh5N9AT"><field name="OP">GT</field><value name="A"><block type="ae_property_get_attribute" id="q8V18^8.OU*1{!QDRY+9"><field name="PARAM">NUM_KEYS</field><value name="ITEM"><block type="variables_get" id="?A(EUjY*i/jcygt^u2Eh"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value></block></value><value name="B"><block type="math_number" id="@wNn)Zfp]G2kqhnsKl*`"><field name="NUM">0</field></block></value></block></value><next><block type="controls_if" id="GYTUhKVtYQS1I=yM6yLt"><comment pinned="false" h="80" w="160">we can only read text attributes from keyframes. If there are no keyframes, we create one.</comment><value name="IF0"><block type="logic_negate" id="DLppI6iq[6IgN;M~#~.0"><value name="BOOL"><block type="variables_get" id=";DaoJ6*}_vwIRrSYdQ}B"><field name="VAR" id="#mY}E9O}QwopKcxrFu[c">has keyframes</field></block></value></block></value><statement name="DO0"><block type="ae_set_value_at_time" id="N2}^1[~?^BL|J7;[?k9v"><value name="PROP"><shadow type="ae_property_path"><mutation fullPath="click refresh icon to choose selected property" base="BASE_PROJECT"></mutation><field name="PROPERTY_PATH">click refresh icon to choose selected property</field><field name="BASE_DROPDOWN">BASE_PROJECT</field></shadow><block type="variables_get" id=":%D5w4$_!JZC/fdEXmY."><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value><value name="TIME"><shadow type="ae_comp_get_attribute"><field name="PARAM">CURRENT_TIME</field><value name="ITEM"><shadow type="ae_active_comp"></shadow></value></shadow><block type="math_number" id="Gw}P[@S/p|+^boo@`9PR"><field name="NUM">0</field></block></value><value name="VALUE"><shadow type="ae_property_value_json"><field name="PROPERTY_VALUE_JSON">click refresh icon to load selected property value</field></shadow><block type="ae_property_get_attribute" id="Kn=GUNAZ1_DixlTjXUf:"><field name="PARAM">VALUE</field><value name="ITEM"><block type="variables_get" id="fFsubvxQ5@naUo3|ijI|"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value></block></value></block></statement><next><block type="variables_set" id="G}F{J69|gKY?KixNbm]X"><field name="VAR" id=";*q6$:ivNvCFZ%IfvTd^">keyData</field><value name="VALUE"><block type="ae_keyframe_json_from_prop" id="1WRfHSy8oD(UPa0+DW}I"><mutation createVariant="ALL"></mutation><field name="CREATE_VARIANT">ALL</field><value name="PROPERTY"><block type="variables_get" id="[D@*3(1{StCF:)/!$%qa"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value></block></value><next><block type="controls_if" id="!(KR4GiZrHk)=#9ub3Kq"><value name="IF0"><block type="logic_negate" id="*j#~{Q@MJZ!RI|Ga^wv%"><value name="BOOL"><block type="variables_get" id="nl;zTS%wN_~pJ+10QNS_"><field name="VAR" id="#mY}E9O}QwopKcxrFu[c">has keyframes</field></block></value></block></value><statement name="DO0"><block type="ae_keyframes_delete" id="fw84vb9Aiqs64,)sA])1"><field name="GREATER_OPTION">GREATER_EQUAL</field><field name="LESS_OPTION">LESS_EQUAL</field><value name="PROPERTY"><block type="variables_get" id="pUS|CkE[JpFHv?Yf@d%K"><field name="VAR" id="g45yo9Z=zigQ]QX%=w.s">src text prop</field></block></value></block></statement><next><block type="block_extendscript_console_log" id="]g(EKKTAS=lqUtm]cMND"><value name="MESSAGE"><shadow type="text"><field name="TEXT">my message</field></shadow><block type="text_join" id=",2%-x;MVlvS.A}J^$JHg"><mutation items="2"></mutation><value name="ADD0"><block type="text" id="3c{H^aJ=?}yy.CW}k~3G"><field name="TEXT">found key data</field></block></value><value name="ADD1"><block type="variables_get" id="l1)mV2^VAuWj`mp$+0A|"><field name="VAR" id=";*q6$:ivNvCFZ%IfvTd^">keyData</field></block></value></block></value><next><block type="string_for_all_regex_matches" id="bB:Dm4)5b$sf9$}#FE$P"><field name="MATCH_VAR" id="h:k#l*Sb)q!TS85XAHT:">match</field><field name="REGEX">"value"\s*:\s*(\{.*\})\s*,\s*"time"\s*:</field><field name="REGEX_MODIFIER">gm</field><value name="MAIN_TEXT"><block type="variables_get" id="d7^[Mlvq*?{71_-{wIOO"><field name="VAR" id=";*q6$:ivNvCFZ%IfvTd^">keyData</field></block></value><statement name="LOOP_STATEMENT"><block type="block_extendscript_console_log" id="d]MiK|2El0b=lTr2ppKr"><value name="MESSAGE"><shadow type="text" id="_/5i32|RXUrH[IEteop1"><field name="TEXT">my message</field></shadow><block type="text_join" id="bhCKzYnCJ|r8[i$BCVw7"><mutation items="2"></mutation><value name="ADD0"><block type="text" id="_R])ed==%xhbpU/0sy4."><field name="TEXT">found key value</field></block></value><value name="ADD1"><block type="lists_getIndex" id="Ta`-;;X`P{?,e(xwDMIZ"><mutation statement="false" at="true"></mutation><field name="MODE">GET</field><field name="WHERE">FROM_START</field><value name="VALUE"><block type="variables_get" id="PZoXXqLBLe7p]R`0R9P!"><field name="VAR" id="h:k#l*Sb)q!TS85XAHT:">match</field></block></value><value name="AT"><block type="math_number" id="vF_x5ilCGTjzk6F8?z2#"><field name="NUM">2</field></block></value></block></value></block></value><next><block type="procedures_ifreturn" id="_/XDmcb]3s$}dxt$ABv`"><mutation value="1"></mutation><value name="CONDITION"><block type="logic_boolean" id=".u:6GMPe%G%`c(yD+M_w"><field name="BOOL">TRUE</field></block></value><value name="VALUE"><block type="lists_getIndex" id="(+cdcVHfi3I[jm465+~D"><mutation statement="false" at="true"></mutation><field name="MODE">GET</field><field name="WHERE">FROM_START</field><value name="VALUE"><block type="variables_get" id="%O3]nRFz9.^Pza}MYLZ?"><field name="VAR" id="h:k#l*Sb)q!TS85XAHT:">match</field></block></value><value name="AT"><block type="math_number" id="I)(L7NWs;QHz$+Ri,kfM"><field name="NUM">2</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><value name="RETURN"><block type="logic_null" id="6+e[w[PAh^c@A:P{#~3*"></block></value></block><block type="procedures_defreturn" id="Fad?OXAurS8M`:S#R0G/" x="0" y="2316"><mutation><arg name="text attributes" varid="Q4]G$wRmT+{C#JBSbDda"></arg></mutation><field name="NAME">get font size from text attributes</field><comment pinned="false" h="80" w="160">returns only the font size from the given text attributes</comment><statement name="STACK"><block type="string_for_all_regex_matches" id="Vo6uI)Lp[(_2/*:}7uiJ"><field name="MATCH_VAR" id="h:k#l*Sb)q!TS85XAHT:">match</field><field name="REGEX">"fontSize"\s*:\s*(\d+)</field><field name="REGEX_MODIFIER">gm</field><value name="MAIN_TEXT"><block type="variables_get" id="VIC~?kE0wv$CVmeKG.T^"><field name="VAR" id="Q4]G$wRmT+{C#JBSbDda">text attributes</field></block></value><statement name="LOOP_STATEMENT"><block type="procedures_ifreturn" id="h4+ujwHM^7.68{sCtAwf"><mutation value="1"></mutation><value name="CONDITION"><block type="logic_boolean" id="7l1eD?sw8e})+Tn/r)`("><field name="BOOL">TRUE</field></block></value><value name="VALUE"><block type="lists_getIndex" id="PNIIiQq$H}xMB(.9{v;|"><mutation statement="false" at="true"></mutation><field name="MODE">GET</field><field name="WHERE">FROM_START</field><value name="VALUE"><block type="variables_get" id="e*{:U?Y!Ipa5w%!*xHk3"><field name="VAR" id="h:k#l*Sb)q!TS85XAHT:">match</field></block></value><value name="AT"><block type="math_number" id="~0::%.wa5Pi#[#D4-wnY"><field name="NUM">2</field></block></value></block></value></block></statement></block></statement><value name="RETURN"><block type="logic_null" id="M@.=9ZsLGaJ$YX$~h4S-"></block></value></block><block type="procedures_defreturn" id="gPM~9Vs5R.3jC+RZOv$+" x="0" y="2696"><mutation statements="false"><arg name="text attributes" varid="Q4]G$wRmT+{C#JBSbDda"></arg><arg name="new font size" varid="eWKEw:v1c7uKqz[BE4-:"></arg></mutation><field name="NAME">set font size in text attributes</field><comment pinned="false" h="80" w="160">changes the font size of the given text attributes</comment><value name="RETURN"><block type="string_replace" id="ePyFGN?sk56?$tXG(Ur#"><field name="REPLACE_VARIANT">REPLACE_ALL</field><value name="MAIN_TEXT"><shadow type="text" id="-S/n}]qU`_QwPCk@hZD/"><field name="TEXT"></field></shadow><block type="variables_get" id="YY=^.T(Mo{(|P:juBrDw"><field name="VAR" id="Q4]G$wRmT+{C#JBSbDda">text attributes</field></block></value><value name="SEARCH_TEXT"><shadow type="text" id="cm0(n8LrWongbT.v~TO_"><field name="TEXT">"fontSize"\s*:\s*\d+</field></shadow></value><value name="REPLACE_TEXT"><shadow type="text" id="zthuNOmUP{grJ*I0SG.O"><field name="TEXT"></field></shadow><block type="string_pattern" id="URH?-]pjwq=T,L6-]{iH"><mutation items="1"></mutation><value name="VALUE"><shadow type="text" id="FVy-}i}t+xk7/*:JP}|t"><field name="TEXT">"fontSize":$1</field></shadow></value><value name="ADD0"><shadow type="text" id="y;~plK^QmtlTr[Nq.eDe"><field name="TEXT">Miller</field></shadow><block type="variables_get" id="4r_aHLHbLrX_$I:EIHh="><field name="VAR" id="eWKEw:v1c7uKqz[BE4-:">new font size</field></block></value></block></value><value name="CASE_SENSITIVE"><shadow type="block_checkbox" id="l?|M!j5)^2Kj9a*N66zX"><field name="VALUE">TRUE</field></shadow></value><value name="IS_REGEXP"><shadow type="block_checkbox" id="}7,p0f5Z:i+!1ZhSi=9~"><field name="VALUE">TRUE</field></shadow></value></block></value></block></xml>