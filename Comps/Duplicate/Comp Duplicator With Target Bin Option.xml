<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</variable><variable id="nusnvb%5cUh3DF)#_j5U">expressions option</variable><variable id="9zjk8zvj4+n-bg!oO=].">project bin</variable><variable id="b3AGT^*DDBB`MN-N=YLA">new comp var</variable><variable id="FR_=*$GQ8*6N|bA#h+uj">my layer</variable></variables><block type="mm_multiline_comment_block" id="%gG`#5(_/f^fE^dk5?#s" x="519" y="450"><field name="TEXT">This script duplicates the active&amp;#10;composition including all its precomps.&amp;#10;&amp;#10;The "fix expressions" option makes sure&amp;#10;that any expressions which reference the&amp;#10;comp itself or any precomps are update&amp;#10;in the duplicated comps to also use the&amp;#10;duplicates (but expressions in the&amp;#10;original comps are not touched).&amp;#10;&amp;#10;This variant contains a parameter&amp;#10;"project bin" where you can enter&amp;#10;the name or path of  project bin into&amp;#10;which all copied comps are moved.</field></block><block type="variables_set" id="1M0UbsdP.ZoJ*zeB5+H:" x="939" y="463"><field name="VAR" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field><value name="VALUE"><block type="text" id="^EoWE^3CN-(hQZkHnJ`R"><field name="TEXT">all|all except locked ones|none</field></block></value><next><block type="variables_set" id=";.8Ar!=m9q,ria!~yT#`"><field name="VAR" id="nusnvb%5cUh3DF)#_j5U">expressions option</field><value name="VALUE"><block type="block_checkbox" id="L~oJ7#:#:eQ[KAHA3~%:"><field name="VALUE">TRUE</field></block></value><next><block type="variables_set" id=",n}LmHIQH*.R!V/7};]!"><field name="VAR" id="9zjk8zvj4+n-bg!oO=].">project bin</field><value name="VALUE"><block type="text" id="LIIjX@KW;oXV+{Zv=TlO"><field name="TEXT">target bin/subbin</field></block></value><next><block type="modal_input_dialog" id="YrTcP`vG)@`*`tVA#H2#"><mutation items="4"></mutation><field name="OK_CANCEL">OK_CANCEL</field><field name="FIELD_LABEL_0">duplicate active comp</field><field name="FIELD_TYPE_0">LABEL</field><field name="FIELD_LABEL_1">duplicate precomps</field><field name="FIELD_TYPE_1">DROPDOWN</field><field name="FIELD_VAR_1" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field><field name="FIELD_LABEL_2">fix expressions</field><field name="FIELD_TYPE_2">CHECKBOX</field><field name="FIELD_VAR_2" id="nusnvb%5cUh3DF)#_j5U">expressions option</field><field name="FIELD_LABEL_3">project bin</field><field name="FIELD_TYPE_3">TEXT_SINGLELINE</field><field name="FIELD_VAR_3" id="9zjk8zvj4+n-bg!oO=].">project bin</field><next><block type="ae_comp_duplicate" id="pl2ob;:dHONLoY*`8o-U"><field name="COMP_VAR" id="b3AGT^*DDBB`MN-N=YLA">new comp var</field><value name="COMP"><shadow type="ae_active_comp" id="rW0aH4L]f10Q}_#^|X,Z"></shadow></value><value name="PRECOMPS"><shadow type="block_checkbox" id="(+;r[=b5e+2HkvnS;#p)"><field name="VALUE">TRUE</field></shadow><block type="logic_compare" id="dv*M?A4*crwOKoBTxGuW"><field name="OP">NEQ</field><value name="A"><block type="variables_get" id="brt2O7!1m!%bJ^7@hH(c"><field name="VAR" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field></block></value><value name="B"><block type="text" id="ezAIQ+%mGB{KECZS$vf0"><field name="TEXT">none</field></block></value></block></value><value name="LOCKED_PRECOMPS"><block type="logic_compare" id="nuwi0*Gih9=-/}AsMlH["><field name="OP">EQ</field><value name="A"><block type="variables_get" id="!_/}OBh1Lw!%LmY^dY~,"><field name="VAR" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field></block></value><value name="B"><block type="text" id=",wiamp1s4;-MwDppQk};"><field name="TEXT">all</field></block></value></block></value><value name="EXPRESSIONS"><shadow type="block_checkbox" id="P_Ossd;Bm;1[rpS37Mj*"><field name="VALUE">TRUE</field></shadow><block type="variables_get" id="fHsV0j%qK%Zb|G)onAo:"><field name="VAR" id="nusnvb%5cUh3DF)#_j5U">expressions option</field></block></value><next><block type="ae_project_item_create_bin" id="`2JT4vs`,upO!;E=nu2m"><value name="BIN"><shadow type="text" id="vM=g6c/wR)!CO3B~eV2l"><field name="TEXT">bin name or path</field></shadow><block type="variables_get" id="@[UF}uE^Wtb)0f@;)au("><field name="VAR" id="9zjk8zvj4+n-bg!oO=].">project bin</field></block></value><value name="PARENT_BIN"><shadow type="ae_itembin_path" id="Mrce1MBka(4%~@b4Q@f!"><field name="ITEM_PATH"></field></shadow></value><next><block type="ae_item_set_attribute" id="u,/npH8Zg#]Y1Ju^S6~J"><field name="PARAM">PARENT_BIN</field><value name="ITEM"><shadow type="ae_item_path" id="UM:`xPMdH^SD(Db3c-bM"><field name="ITEM_PATH">click refresh icon to choose selected project item</field></shadow><block type="variables_get" id="_N}VWLKl5}R:fiqQ^}(l"><field name="VAR" id="b3AGT^*DDBB`MN-N=YLA">new comp var</field></block></value><value name="VALUE"><shadow type="ae_itembin_path" id="vktJ+PwMc$F1ZH=c5-c7"><field name="ITEM_PATH"></field></shadow><block type="variables_get" id="9wu~TITmJjrg*p*Ffuir"><field name="VAR" id="9zjk8zvj4+n-bg!oO=].">project bin</field></block></value><next><block type="controls_if" id=":}!2MuNb9@W|9lce^PMa"><value name="IF0"><block type="logic_compare" id=",W,K#NbqAkii)A-OMVMQ"><field name="OP">NEQ</field><value name="A"><block type="variables_get" id="(UX#+FzHHdcWkl([lVtr"><field name="VAR" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field></block></value><value name="B"><block type="text" id="/pt+(9:uB[-hrLWx3GBr"><field name="TEXT">none</field></block></value></block></value><statement name="DO0"><block type="ae_layer_for_all" id="T%QK;S{qKYllCBRtj|8L"><field name="SELECTION">ALL</field><field name="TYPE">PrecompLayer</field><field name="LAYER_VAR" id="FR_=*$GQ8*6N|bA#h+uj">my layer</field><field name="COMP_CHOICE">COMP_AND_PRECOMPS</field><value name="COMP"><shadow type="ae_active_comp" id="xntB}tXU]J23Q`pM%!2s"></shadow><block type="variables_get" id="4VpKEew3_ANLeGwu5bVJ"><field name="VAR" id="b3AGT^*DDBB`MN-N=YLA">new comp var</field></block></value><statement name="LOOP_STATEMENT"><block type="controls_if" id="VX]yu|TvArN_JU|E$Jys"><value name="IF0"><block type="logic_operation" id="`:xHw=dnf_x)LehO;gNG"><field name="OP">OR</field><value name="A"><block type="logic_compare" id="OL|vRQN6G0eSAi}#eq5l"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="1e5tpfaOrj^KWs$,D^!T"><field name="VAR" id="-@|Pb/jEFU.r4Z^]O0@t">precomp option</field></block></value><value name="B"><block type="text" id=":M1N)Oi14gmrziCIIXTC"><field name="TEXT">all</field></block></value></block></value><value name="B"><block type="logic_negate" id="NIesnvN%9QCt%Hrcs.U["><value name="BOOL"><block type="ae_layer_get_attribute" id="sg~k*hR-hD5nPB-/mv,R"><field name="PARAM">LOCKED</field><value name="ITEM"><block type="variables_get" id="|#OtU=@K][1Hk9EoQoD#"><field name="VAR" id="FR_=*$GQ8*6N|bA#h+uj">my layer</field></block></value></block></value></block></value></block></value><statement name="DO0"><block type="ae_item_set_attribute" id="zO+Tx-q|Is],%,kqH$iG"><field name="PARAM">PARENT_BIN</field><value name="ITEM"><shadow type="ae_item_path"><field name="ITEM_PATH">click refresh icon to choose selected project item</field></shadow><block type="ae_layer_get_attribute" id="hbgVS@j.@PVLKN$KVe{6"><field name="PARAM">SOURCE</field><value name="ITEM"><block type="variables_get" id="pE-C1$4Bym}1*?Ho~SJv"><field name="VAR" id="FR_=*$GQ8*6N|bA#h+uj">my layer</field></block></value></block></value><value name="VALUE"><shadow type="ae_itembin_path"><field name="ITEM_PATH"></field></shadow><block type="variables_get" id="KynY_Q$jRI9zt}N^6RZV"><field name="VAR" id="9zjk8zvj4+n-bg!oO=].">project bin</field></block></value></block></statement></block></statement></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type="es_tutorial" id="dZ~RB.d(bRRWYnVGx;nl" x="450" y="893"><field name="WATCH_TUT_LABEL">open web page</field><field name="TITLE">see this forum request</field><field name="URL">https://community.adobe.com/t5/after-effects-discussions/automation-blocks-duplicate-comp-and-move-into-folder/td-p/13128480.com/shorts/iCKK9Dm0ztc</field></block></xml>